<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ÆTHERWAVES: Spatial Theremin</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@3.11.0/dist/tf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/handpose@0.0.7/dist/handpose.min.js"></script>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body class="h-screen w-screen overflow-hidden">
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
      <div class="loading-spinner"></div>
      <h2 class="text-2xl mb-4 tracking-widest" id="loadingMessage">
        INITIALIZING SYSTEM
      </h2>
      <p class="text-sm opacity-50" id="loadingSubMessage">
        Loading TensorFlow.js
      </p>
    </div>

    <!-- Main Container -->
    <div class="relative h-full w-full">
      <!-- Webcam Video Feed -->
      <video id="webcam" class="webcam-feed" autoplay playsinline></video>

      <!-- Grid Overlay -->
      <div class="grid-overlay">
        <svg
          width="100%"
          height="100%"
          viewBox="0 0 100 100"
          preserveAspectRatio="none"
          id="gridSvg"
        >
          <!-- Grid lines will be added via JavaScript -->
        </svg>
      </div>

      <!-- Title -->
      <h1
        class="absolute top-8 w-full text-center text-5xl tracking-widest z-10 opacity-80"
      >
        ÆTHERWAVES
      </h1>

      <!-- Hand Position Markers (will be added via JavaScript) -->
      <div id="frequencyIndicator" class="absolute text-xs opacity-60 hidden">
        PITCH
      </div>
      <div id="volumeIndicator" class="absolute text-xs opacity-60 hidden">
        VOLUME
      </div>

      <!-- Info Panel -->
      <div class="absolute left-8 bottom-8 z-10 flex flex-col items-start">
        <div class="text-6xl font-light tracking-widest mb-2" id="noteDisplay">
          -
        </div>
        <div class="flex items-center space-x-2 opacity-70">
          <div class="status-indicator"></div>
          <div class="text-sm tracking-wider">
            FREQUENCY: <span id="frequencyDisplay">0.00</span> HZ
          </div>
        </div>
        <div class="text-sm tracking-wider opacity-70">
          VOLUME: <span id="volumeDisplay">0</span>%
        </div>
        <div class="waveform-container mt-6 opacity-70 w-64">
          <canvas id="waveform" class="w-full h-full"></canvas>
        </div>
      </div>

      <!-- Control Panel -->
      <div class="absolute right-8 top-8 z-10 flex flex-col items-end">
        <h2 class="text-xl mb-6 tracking-widest opacity-70">INTERFACE</h2>
        <button
          id="startButton"
          class="w-48 py-3 mb-6 text-center tracking-widest hover:bg-white hover:text-black transition-all text-sm"
        >
          INITIATE
        </button>
        <div class="mb-6 w-48">
          <div class="text-xs tracking-wider opacity-70 mb-2">WAVEFORM</div>
          <div class="select-wrapper">
            <select id="waveformSelect" class="text-sm">
              <option value="sine">SINE WAVE</option>
              <option value="triangle">TRIANGLE WAVE</option>
              <option value="sawtooth">SAWTOOTH WAVE</option>
              <option value="square">SQUARE WAVE</option>
            </select>
          </div>
        </div>
        <div class="mb-6 w-48">
          <div class="text-xs tracking-wider opacity-70 mb-2">REVERB</div>
          <input
            type="range"
            id="reverbRange"
            min="0"
            max="1"
            step="0.01"
            value="0.3"
          />
        </div>
        <div class="mb-6 w-48">
          <div class="text-xs tracking-wider opacity-70 mb-2">FILTER</div>
          <input
            type="range"
            id="filterRange"
            min="20"
            max="5000"
            step="1"
            value="1000"
          />
        </div>
      </div>
    </div>

    <script src="script.js"></script>
  </body>
</html>
